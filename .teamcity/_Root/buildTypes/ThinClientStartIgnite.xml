<?xml version="1.0" encoding="UTF-8"?>
<template xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" uuid="01cdeef9-424c-4b5c-a284-61ce6a5698f9" xsi:noNamespaceSchemaLocation="https://www.jetbrains.com/teamcity/schemas/2021.1/project-config.xsd">
  <name>Thin Client: Start Ignite</name>
  <description>Runs single node of Apache Ignite</description>
  <settings>
    <parameters>
      <param name="IGNITE_INIT_TIME" value="60" spec="text description='Time to wait for Ignite node to start' label='Ignite Startup Time (s)' validationMode='any' display='normal'" />
      <param name="env.APACHE_IGNITE_CLIENT_DEBUG" value="false" spec="text display='hidden' validationMode='any'" />
      <param name="env.APACHE_IGNITE_CLIENT_ENDPOINTS" value="127.0.0.1:10800" spec="text display='hidden' validationMode='any'" />
      <param name="env.IGNITE_HOME" value="%system.teamcity.build.checkoutDir%" spec="text display='hidden' validationMode='any'" />
    </parameters>
    <build-runners>
      <runner id="RUNNER_3" name="Start Ignite node" type="simpleRunner">
        <parameters>
          <param name="script.content"><![CDATA[#!/usr/bin/env bash
set -o nounset; set -o errexit; set -o pipefail; set -o errtrace; set -o functrace
set -x


# Run Apache Ignite node
bash %env.IGNITE_HOME%/bin/ignite.sh &
sleep %IGNITE_INIT_TIME%]]></param>
          <param name="teamcity.step.mode" value="default" />
          <param name="use.custom.script" value="true" />
        </parameters>
      </runner>
    </build-runners>
    <vcs-settings />
    <requirements />
    <build-triggers />
    <cleanup />
  </settings>
</template>

