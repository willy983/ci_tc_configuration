<?xml version="1.0" encoding="UTF-8"?>
<build-type xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" uuid="0d603b9a-b53e-4127-a162-b0bec0a534ae" xsi:noNamespaceSchemaLocation="https://www.jetbrains.com/teamcity/schemas/2021.1/project-config.xsd">
  <name>[APACHE IGNITE NIGHTLY RELEASE] #1 :: Build .Net &amp; C++</name>
  <description />
  <settings>
    <options>
      <option name="artifactRules" value="modules\platforms\dotnet\Apache.Ignite\bin\x64\Release\** =&gt; ignite.dotnet.bin.zip&#xA;modules\platforms\dotnet\Apache.Ignite\bin\Release\** =&gt; ignite.dotnet.bin.zip&#xA;modules\platforms\dotnet\Apache.Ignite\bin\x86\Release\** =&gt; ignite.dotnet.bin.zip!x86&#xA;modules\platforms\dotnet\Apache.Ignite.Linq\bin\Release\** =&gt; ignite.dotnet.bin.zip&#xA;modules\platforms\dotnet\Apache.Ignite.AspNet\bin\Release\** =&gt; ignite.dotnet.bin.zip&#xA;modules\platforms\dotnet\Apache.Ignite.EntityFramework\bin\Release\** =&gt; ignite.dotnet.bin.zip&#xA;modules\platforms\dotnet\Apache.Ignite.NLog\bin\Release\** =&gt; ignite.dotnet.bin.zip&#xA;modules\platforms\dotnet\Apache.Ignite.Log4net\bin\Release\** =&gt; ignite.dotnet.bin.zip&#xA;modules\platforms\cpp\odbc\install\*.msi =&gt; ignite.odbc.installers.zip&#xA;modules\platforms\cpp\odbc\install\dummy =&gt; ignite.odbc.installers.zip&#xA;modules\clients\target\dotnetdoc =&gt; dotnetdoc.zip" />
      <option name="cleanBuild" value="true" />
    </options>
    <parameters>
      <param name="IGNITE_VERSION" value="%dep.Releases_NightlyRelease_ApacheIgniteNightlyReleasePrepare.IGNITE_VERSION%" />
      <param name="env.JAVA_HOME" value="%env.JDK_ORA_8%" spec="text display='hidden' validationMode='any'" />
      <param name="env.OPENSSL_HOME" value="C:\OpenSSL-Win64" spec="text display='hidden' validationMode='any'" />
      <param name="env.OPENSSL_HOME_X86" value="C:\OpenSSL-Win32" />
    </parameters>
    <build-runners>
      <runner id="RUNNER_4" name="Get NuGet dependencies" type="jb.nuget.installer">
        <parameters>
          <param name="nuget.path" value="%teamcity.tool.NuGet.CommandLine.4.7.0%" />
          <param name="nuget.updatePackages.mode" value="sln" />
          <param name="nuget.use.restore" value="restore" />
          <param name="sln.path" value="modules/platforms/dotnet/Apache.Ignite.sln" />
          <param name="teamcity.step.mode" value="default" />
        </parameters>
      </runner>
      <runner id="RUNNER_201" name="Build .NET" type="jetbrains_powershell">
        <parameters>
          <param name="jetbrains_powershell_bitness" value="x64" />
          <param name="jetbrains_powershell_edition" value="Desktop" />
          <param name="jetbrains_powershell_execution" value="PS1" />
          <param name="jetbrains_powershell_scriptArguments"><![CDATA[-skipJava
-skipNuget]]></param>
          <param name="jetbrains_powershell_script_file" value="modules/platforms/dotnet/build.ps1" />
          <param name="jetbrains_powershell_script_mode" value="FILE" />
          <param name="teamcity.build.workingDir" value="modules/platforms/dotnet" />
          <param name="teamcity.step.mode" value="default" />
        </parameters>
      </runner>
      <runner id="RUNNER_203" name="Build 32-bit ODBC" type="VS.Solution">
        <parameters>
          <param name="build-file-path" value="modules/platforms/cpp/project/vs/ignite.sln" />
          <param name="msbuild.prop.Configuration" value="Release" />
          <param name="msbuild.prop.Platform" value="Win32" />
          <param name="msbuild_version" value="15.0" />
          <param name="run-platform" value="x86" />
          <param name="targets" value="odbc:Rebuild" />
          <param name="teamcity.step.mode" value="default" />
          <param name="toolsVersion" value="15.0" />
          <param name="vs.version" value="vs2017" />
        </parameters>
      </runner>
      <runner id="RUNNER_205" name="Build 64-bit ODBC" type="VS.Solution">
        <parameters>
          <param name="build-file-path" value="modules/platforms/cpp/project/vs/ignite.sln" />
          <param name="msbuild.prop.Configuration" value="Release" />
          <param name="msbuild.prop.Platform" value="x64" />
          <param name="msbuild_version" value="15.0" />
          <param name="run-platform" value="x86" />
          <param name="targets" value="odbc:Rebuild" />
          <param name="teamcity.step.mode" value="execute_if_failed" />
          <param name="toolsVersion" value="15.0" />
          <param name="vs.version" value="vs2017" />
        </parameters>
      </runner>
      <runner id="RUNNER_206" name="Build 32-bit ODBC installer" type="simpleRunner">
        <parameters>
          <param name="script.content"><![CDATA[candle.exe ignite-odbc-x86.wxs || exit 1
light.exe -ext WixUIExtension ignite-odbc-x86.wixobj || exit 1]]></param>
          <param name="teamcity.build.workingDir" value="modules/platforms/cpp/odbc/install" />
          <param name="teamcity.step.mode" value="default" />
          <param name="use.custom.script" value="true" />
        </parameters>
      </runner>
      <runner id="RUNNER_213" name="Build 64-bit ODBC installer" type="simpleRunner">
        <parameters>
          <param name="script.content"><![CDATA[candle.exe ignite-odbc-amd64.wxs || exit 1
light.exe -ext WixUIExtension ignite-odbc-amd64.wixobj || exit 1]]></param>
          <param name="teamcity.build.workingDir" value="modules/platforms/cpp/odbc/install" />
          <param name="teamcity.step.mode" value="default" />
          <param name="use.custom.script" value="true" />
        </parameters>
      </runner>
      <runner id="RUNNER_214" name="Build .NET documentation" type="simpleRunner">
        <parameters>
          <param name="script.content" value="generate-docs.cmd" />
          <param name="teamcity.build.workingDir" value="modules/platforms/dotnet/docfx" />
          <param name="teamcity.step.mode" value="default" />
          <param name="use.custom.script" value="true" />
        </parameters>
      </runner>
    </build-runners>
    <vcs-settings>
      <vcs-entry-ref root-id="GitHubApacheIgnite" />
    </vcs-settings>
    <requirements />
    <build-triggers />
    <artifact-dependencies>
      <dependency id="ARTIFACT_DEPENDENCY_106" sourceBuildTypeId="Releases_NightlyRelease_ApacheIgniteNightlyReleasePrepare" cleanDestination="true">
        <revisionRule name="sameChainOrLastFinished" revision="latest.sameChainOrLastFinished" />
        <artifact sourcePath="apache-ignite-%IGNITE_VERSION%-src.zip!** =&gt; ." />
      </dependency>
    </artifact-dependencies>
    <dependencies>
      <depend-on sourceBuildTypeId="Releases_NightlyRelease_ApacheIgniteNightlyReleasePrepare">
        <options>
          <option name="take-started-build-with-same-revisions" value="true" />
          <option name="take-successful-builds-only" value="true" />
        </options>
      </depend-on>
    </dependencies>
    <cleanup />
  </settings>
</build-type>

