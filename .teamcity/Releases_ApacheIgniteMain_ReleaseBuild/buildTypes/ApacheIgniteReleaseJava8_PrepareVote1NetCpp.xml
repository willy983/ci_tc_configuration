<?xml version="1.0" encoding="UTF-8"?>
<build-type xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" uuid="1ccf1f5a-0725-4c83-896d-d273de565f34" xsi:noNamespaceSchemaLocation="https://www.jetbrains.com/teamcity/schemas/2021.1/project-config.xsd">
  <name>[1] Build .Net &amp; C++</name>
  <description />
  <settings>
    <options>
      <option name="artifactRules" value="ignite\modules\platforms\dotnet\Apache.Ignite\bin\x64\Release\** =&gt; ignite.dotnet.bin.zip&#xA;ignite\modules\platforms\dotnet\Apache.Ignite\bin\Release\** =&gt; ignite.dotnet.bin.zip&#xA;ignite\modules\platforms\dotnet\Apache.Ignite\bin\x86\Release\** =&gt; ignite.dotnet.bin.zip!x86&#xA;ignite\modules\platforms\dotnet\Apache.Ignite.Linq\bin\Release\** =&gt; ignite.dotnet.bin.zip&#xA;ignite\modules\platforms\dotnet\Apache.Ignite.AspNet\bin\Release\** =&gt; ignite.dotnet.bin.zip&#xA;ignite\modules\platforms\dotnet\Apache.Ignite.EntityFramework\bin\Release\** =&gt; ignite.dotnet.bin.zip&#xA;ignite\modules\platforms\dotnet\Apache.Ignite.NLog\bin\Release\** =&gt; ignite.dotnet.bin.zip&#xA;ignite\modules\platforms\dotnet\Apache.Ignite.Log4net\bin\Release\** =&gt; ignite.dotnet.bin.zip&#xA;ignite\modules\platforms\dotnet\nupkg\*.nupkg =&gt; .&#xA;ignite\modules\platforms\cpp\odbc\install\*.msi =&gt; ignite.odbc.installers.zip&#xA;ignite\modules\platforms\cpp\odbc\install\dummy =&gt; ignite.odbc.installers.zip&#xA;ignite\modules\clients\target\dotnetdoc =&gt; dotnetdoc.zip&#xA;vote.patch" />
      <option name="cleanBuild" value="true" />
      <option name="excludeDefaultBranchChanges" value="true" />
    </options>
    <parameters>
      <param name="IGNITE_VERSION" value="" />
      <param name="RC_NAME" value="" />
      <param name="env.JAVA_HOME" value="%env.JDK_ORA_8%" />
      <param name="env.OPENSSL_HOME" value="C:\OpenSSL-Win64" />
      <param name="env.OPENSSL_HOME_X86" value="C:\OpenSSL-Win32" />
      <param name="system.JAVA_HOME" value="%env.JAVA_HOME%" />
    </parameters>
    <build-runners>
      <runner id="RUNNER_11" name="Add NuGet executable to PATH" type="simpleRunner">
        <parameters>
          <param name="script.content"><![CDATA[@echo on

echo ##teamcity[setParameter name='env.PATH' value='%%PATH%%;%teamcity.tool.NuGet.CommandLine.DEFAULT%\tools']]]></param>
          <param name="teamcity.step.mode" value="default" />
          <param name="use.custom.script" value="true" />
        </parameters>
      </runner>
      <runner id="RUNNER_188" name="Git setup (Ignore chmod settings)" type="simpleRunner">
        <parameters>
          <param name="script.content" value="git config core.filemode false" />
          <param name="teamcity.build.workingDir" value="ignite" />
          <param name="teamcity.step.mode" value="default" />
          <param name="use.custom.script" value="true" />
        </parameters>
      </runner>
      <runner id="RUNNER_191" name="Change maven version" type="Maven2">
        <parameters>
          <param name="goals" value="versions:set" />
          <param name="localRepoScope" value="mavenDefault" />
          <param name="maven.path" value="%teamcity.tool.maven.DEFAULT%" />
          <param name="pomLocation" value="ignite/pom.xml" />
          <param name="runnerArgs" value="-DnewVersion=%IGNITE_VERSION% -Pall-java,all-scala,all-other -DgenerateBackupPoms=false  -DgroupId=* -DartifactId=* -DoldVersion=* -DprocessDependencies=false" />
          <param name="teamcity.coverage.emma.include.source" value="true" />
          <param name="teamcity.coverage.emma.instr.parameters" value="-ix -*Test*" />
          <param name="teamcity.coverage.idea.includePatterns" value="*" />
          <param name="teamcity.coverage.jacoco.patterns" value="+:*" />
          <param name="teamcity.step.mode" value="default" />
          <param name="userSettingsSelection" value="userSettingsSelection:default" />
        </parameters>
      </runner>
      <runner id="RUNNER_192" name="Change dotnet &amp; cpp versions" type="Maven2">
        <parameters>
          <param name="goals" value="validate" />
          <param name="localRepoScope" value="mavenDefault" />
          <param name="maven.path" value="%teamcity.tool.maven.DEFAULT%" />
          <param name="pomLocation" value="ignite/pom.xml" />
          <param name="runnerArgs" value="-P update-versions -Dnew.ignite.version=%IGNITE_VERSION%" />
          <param name="teamcity.coverage.emma.include.source" value="true" />
          <param name="teamcity.coverage.emma.instr.parameters" value="-ix -*Test*" />
          <param name="teamcity.coverage.idea.includePatterns" value="*" />
          <param name="teamcity.coverage.jacoco.patterns" value="+:*" />
          <param name="teamcity.step.mode" value="default" />
          <param name="userSettingsSelection" value="userSettingsSelection:default" />
        </parameters>
      </runner>
      <runner id="RUNNER_200" name="Git patch (with changed versions) generation" type="simpleRunner">
        <parameters>
          <param name="script.content" value="git diff &gt; ../vote.patch" />
          <param name="teamcity.build.workingDir" value="ignite" />
          <param name="teamcity.step.mode" value="default" />
          <param name="use.custom.script" value="true" />
        </parameters>
      </runner>
      <runner id="RUNNER_201" name="Build Ignite.NET" type="jetbrains_powershell">
        <parameters>
          <param name="jetbrains_powershell_bitness" value="x64" />
          <param name="jetbrains_powershell_edition" value="Desktop" />
          <param name="jetbrains_powershell_execution" value="PS1" />
          <param name="jetbrains_powershell_scriptArguments" value="-skipJava -skipNuget" />
          <param name="jetbrains_powershell_script_file" value="ignite/modules/platforms/dotnet/build.ps1" />
          <param name="jetbrains_powershell_script_mode" value="FILE" />
          <param name="teamcity.build.workingDir" value="ignite/modules/platforms/dotnet" />
          <param name="teamcity.step.mode" value="default" />
        </parameters>
      </runner>
      <runner id="RUNNER_203" name="Build 32-bit ODBC binary" type="VS.Solution">
        <parameters>
          <param name="build-file-path" value="ignite/modules/platforms/cpp/project/vs/ignite.sln" />
          <param name="msbuild.prop.Configuration" value="Release" />
          <param name="msbuild.prop.Platform" value="Win32" />
          <param name="msbuild_version" value="4.0" />
          <param name="run-platform" value="x86" />
          <param name="targets" value="odbc:Rebuild" />
          <param name="teamcity.step.mode" value="default" />
          <param name="toolsVersion" value="4.0" />
          <param name="vs.version" value="vs2010" />
        </parameters>
      </runner>
      <runner id="RUNNER_205" name="Build 64-bit ODBC binary" type="VS.Solution">
        <parameters>
          <param name="build-file-path" value="ignite/modules/platforms/cpp/project/vs/ignite.sln" />
          <param name="msbuild.prop.Configuration" value="Release" />
          <param name="msbuild.prop.Platform" value="x64" />
          <param name="msbuild_version" value="4.0" />
          <param name="run-platform" value="x86" />
          <param name="targets" value="odbc:Rebuild" />
          <param name="teamcity.step.mode" value="execute_if_failed" />
          <param name="toolsVersion" value="4.0" />
          <param name="vs.version" value="vs2010" />
        </parameters>
      </runner>
      <runner id="RUNNER_206" name="Build 32-bit ODBC installer" type="simpleRunner">
        <parameters>
          <param name="script.content"><![CDATA[candle.exe ignite-odbc-x86.wxs || exit 1
light.exe -ext WixUIExtension ignite-odbc-x86.wixobj || exit 1]]></param>
          <param name="teamcity.build.workingDir" value="ignite/modules/platforms/cpp/odbc/install" />
          <param name="teamcity.step.mode" value="default" />
          <param name="use.custom.script" value="true" />
        </parameters>
      </runner>
      <runner id="RUNNER_213" name="Build 64-bit ODBC installer" type="simpleRunner">
        <parameters>
          <param name="script.content"><![CDATA[candle.exe ignite-odbc-amd64.wxs || exit 1
light.exe -ext WixUIExtension ignite-odbc-amd64.wixobj || exit 1]]></param>
          <param name="teamcity.build.workingDir" value="ignite/modules/platforms/cpp/odbc/install" />
          <param name="teamcity.step.mode" value="default" />
          <param name="use.custom.script" value="true" />
        </parameters>
      </runner>
      <runner id="RUNNER_214" name="Build dotnetdoc" type="simpleRunner">
        <parameters>
          <param name="script.content" value="generate-docs.cmd" />
          <param name="teamcity.build.workingDir" value="ignite/modules/platforms/dotnet/docfx" />
          <param name="teamcity.step.mode" value="default" />
          <param name="use.custom.script" value="true" />
        </parameters>
      </runner>
    </build-runners>
    <vcs-settings>
      <vcs-entry-ref root-id="GitHubApacheIgnite">
        <checkout-rule rule="+:. =&gt; ./ignite" />
      </vcs-entry-ref>
    </vcs-settings>
    <requirements />
    <build-triggers />
    <cleanup />
  </settings>
</build-type>

